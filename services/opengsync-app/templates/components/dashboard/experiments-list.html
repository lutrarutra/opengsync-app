{% from "components/status_bar.jinja2" import experiment_status_bar with context %}
{% from "components/spinner.jinja2" import spinner %}

{% for experiment in experiments %}
<div class="element-banner"
{% if loop.last and limit == loop.index %}
hx-get="{{ url_for('experiments_htmx.get_recent_experiments', page=current_page + 1) }}" hx-trigger="intersect once" hx-target="#experiments-htmx-indicator" hx-swap="outerHTML" hx-indicator="#experiments-htmx-indicator"
{% endif %}>
    <div class="row pb-1">
        <div class="title col-4"><a href="{{ url_for('experiments_page.experiment', experiment_id=experiment.id) }}">{{ experiment.name }}</a></div>
        <div class="description col-4">{{ experiment.operator.name }}</span></div>
        <div class="col-4">{{ experiment.timestamp_created_str("%-d. %b. @ %-H:%M") }}</div>
    </div>
    {{ experiment_status_bar(experiment) }}
</div>
{% endfor %}
{{ spinner(id="experiments-htmx-indicator") }}